{"version":3,"sources":["module.js","resources.js","translation/translation.js","cultureResolver.js"],"names":["angular","module","factory","$resource","getAll","method","url","isArray","get","save","remove","directive","controller","$scope","availableCultures","Invenietis","Cultures","SupportedCultures","getFlag","culture","Id","selector","lang1","lang2","getCulturedItem1","item","getCulturedItem2","availableCulturesLang1","_","filter","c","availableCulturesLang2","scope","templateUrl","CultureResolver","defaultCulture","DefaultCulture","fallbackMap","FallbackMap","orderedCultures","concat","chosen","find","i","String","IsNullOrEmpty","str"],"mappings":"AAAAA,QAAQC,OAAO,yBAA0B;ACAzCD,QAAQC,OAAO,yBACVC,QAAQ,WAAY,YAAa,SAAUC,GACxC,MAAOA,GAAU,OAERC,QAAUC,OAAQ,MAAOC,IAAK,kBAAmBC,SAAS,GAC1DC,KAAOH,OAAQ,MAAOC,IAAK,qBAC3BG,MAAQJ,OAAQ,OAAQC,IAAK,iBAC7BI,QAAUL,OAAQ,SAAUC,IAAK;ACPlDN,QAAQC,OAAO,yBACVU,UAAU,cAAe,WACtB,GAAIC,IAAc,SAAU,SAAUC,GAClC,GAAIC,GAAoBC,WAAWC,SAASC,iBAE5CJ,GAAOK,QAAU,SAAUC,GACvB,MAAO,cAAgBA,EAAQC,GAAK,YAGxCP,EAAOQ,SAASC,MAAQR,EAAkB,GAC1CD,EAAOQ,SAASE,MAAQT,EAAkB,GAE1CD,EAAOQ,SAASG,iBAAmB,WAC/B,MAAIX,GAAOY,MAAQZ,EAAOY,KAAKT,SACpBH,EAAOY,KAAKT,SAASH,EAAOQ,SAASC,MAAMF,IADtD,QAKJP,EAAOQ,SAASK,iBAAmB,WAC/B,MAAIb,GAAOY,MAAQZ,EAAOY,KAAKT,SACpBH,EAAOY,KAAKT,SAASH,EAAOQ,SAASE,MAAMH,IADtD,QAKJP,EAAOQ,SAASM,uBAAyB,WACrC,MAAOC,GAAEC,OAAOf,EAAmB,SAAUgB,GACzC,MAAOA,IAAKjB,EAAOQ,SAASE,SAIpCV,EAAOQ,SAASU,uBAAyB,WACrC,MAAOH,GAAEC,OAAOf,EAAmB,SAAUgB,GACzC,MAAOA,IAAKjB,EAAOQ,SAASC,UAKxC,QACIU,OACIX,SAAU,IACVI,KAAM,KAEVQ,YAAa,yDACbrB,WAAYA;AC3CxB,GAAIsB,iBAAkB,SAAUT,EAAMI,GAClC,GAAKJ,EAAKT,SAAV,CAEA,GAAImB,GAAiBpB,WAAWC,SAASoB,eAErCC,GADoBtB,WAAWC,SAASC,kBAC1BF,WAAWC,SAASsB,aAElCC,GAAmBJ,GAAgBK,OAAOH,EAAYF,IAEtDM,EAASb,EAAEc,KAAKH,EAAiB,SAAUI,GAC3C,MAA8B,OAAvBlB,EAAKT,SAAS2B,EAAEvB,KAAeS,EAAOJ,EAAKT,SAAS2B,EAAEvB,MAGjE,OAAc,OAAVqB,EAAuBhB,EAAKT,SAASyB,EAAOrB,IAAhD,QAIJwB,QAAOC,cAAgB,SAAUC,GAC7B,MAAc,OAAPA,GAAsB,IAAPA","file":"wwwroot/js/common.min.js","sourcesContent":["angular.module('invenietis.app.common', ['ngResource']);","angular.module('invenietis.app.common')\r\n    .factory('Clients', ['$resource', function ($resource) {\r\n        return $resource('', {},\r\n             {\r\n                 getAll: { method: 'GET', url: '/Clients/GetAll', isArray: true },\r\n                 get: { method: 'GET', url: '/Clients/Edit/:id' },\r\n                 save: { method: 'POST', url: '/Clients/Save' },\r\n                 remove: { method: 'DELETE', url: '/Clients/Delete/:id' },\r\n             });\r\n    }]);","angular.module('invenietis.app.common')\r\n    .directive('translation', function () {\r\n        var controller = ['$scope', function ($scope) {\r\n            var availableCultures = Invenietis.Cultures.SupportedCultures;\r\n\r\n            $scope.getFlag = function (culture) {\r\n                return '/img/flags/' + culture.Id + '-big.png';\r\n            }\r\n\r\n            $scope.selector.lang1 = availableCultures[0];\r\n            $scope.selector.lang2 = availableCultures[1];\r\n\r\n            $scope.selector.getCulturedItem1 = function () {\r\n                if ($scope.item && $scope.item.Cultures) {\r\n                    return $scope.item.Cultures[$scope.selector.lang1.Id];\r\n                }\r\n            }\r\n\r\n            $scope.selector.getCulturedItem2 = function () {\r\n                if ($scope.item && $scope.item.Cultures) {\r\n                    return $scope.item.Cultures[$scope.selector.lang2.Id];\r\n                }\r\n            }\r\n\r\n            $scope.selector.availableCulturesLang1 = function () {\r\n                return _.filter(availableCultures, function (c) {\r\n                    return c != $scope.selector.lang2;\r\n                });\r\n            }\r\n\r\n            $scope.selector.availableCulturesLang2 = function () {\r\n                return _.filter(availableCultures, function (c) {\r\n                    return c != $scope.selector.lang1;\r\n                });\r\n            }\r\n        }];\r\n\r\n        return {\r\n            scope: {\r\n                selector: '=',\r\n                item: '=',\r\n            },\r\n            templateUrl: '/js/app/common/directives/translation/translation.html',\r\n            controller: controller\r\n        };\r\n    });","var CultureResolver = function (item, filter) {\r\n    if (!item.Cultures) return;\r\n\r\n    var defaultCulture = Invenietis.Cultures.DefaultCulture;\r\n    var supportedCultures = Invenietis.Cultures.SupportedCultures;\r\n    var fallbackMap = Invenietis.Cultures.FallbackMap;\r\n\r\n    var orderedCultures = [defaultCulture].concat(fallbackMap[defaultCulture]);\r\n\r\n    var chosen = _.find(orderedCultures, function (i) {\r\n        return item.Cultures[i.Id] != null && filter(item.Cultures[i.Id]);\r\n    });\r\n\r\n    if (chosen != null) return item.Cultures[chosen.Id];\r\n}\r\n\r\n\r\nString.IsNullOrEmpty = function (str) {\r\n    return str != null && str != '';\r\n}"],"sourceRoot":"/source/"}